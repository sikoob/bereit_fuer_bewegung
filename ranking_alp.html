<!DOCTYPE html>
<html lang="de">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css" />
        <style> 
            body { 
                margin: 0; 
                background-color: rgb(18, 50, 80);
            }  
            
            .text {
                font-family: Arial, Helvetica, sans-serif;
                display: block;
                position: absolute;
                top: 0.5rem;
                left: 2rem; 
            }

            h1 {

                color: rgb(55,195,145);
                font-size: 2rem;
            }

            a {
                color: rgb(55,195,145);
                font-size: 1.25rem;
                padding-right: 2rem;
            }

            .chart-container {
                height: 65%;
                width: 70%;
                display: block;
                position: absolute;
                top: 10rem;
                left: 10rem;
                background-color: rgba(255,255,255,0.95);
            }

            @media (max-width: 56.25em) {
                .text {
                    top: 0.2rem;
                    left: 0.2rem;
                }

                h1 {
                    font-size: 1.5rem;
                }

                a{
                    font-size: 1rem;
                }

                .chart-container {
                    height: 30%;
                    width: 90%;
                    top: 9rem;
                    left: 1rem;
                }
            }
        </style>
        <title>Bereit für Bewegung - Ranking</title>
    </head>
    <body>
        <div class="text">
            <h1>Ranking der gesammelten Kilometer je Team</h1>
            <a href="index.html">Zurück</a>
            <a href="ranking.html">Sortierung nach gesammelten Kilometern</a>
        </div>
        <div class="chart-container">
            <canvas id="myChart" class="chart"></canvas>
        </div>
        <!--scripts for diagram displays  -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script>
                    //definition of variables

            let dataSet = [0, 0, 0, 0, 0, 0];     //dataset to be used

            let maxVal = Math.max(...dataSet);                              //max. value in dataset to define height of y-axes and way of chart setup

            let labelTeams = ['3C2ST','Nachhaltig schnell','PoseiDonnas','Roadrunners Mannheimer Oststadt','Stöcklesfetzer', 'Walk&Talk @B20'];        //variable for teams to be displayed for easier modification

            let backgroundColors = ['rgba(18, 50, 80, 0.2)', 'rgba(55, 195, 155, 0.2)'];

            let borderColors = ['rgba(18, 50, 80, 0.5)', 'rgba(55, 195, 155, 0.5)'];

            let stepSize = 20;

            let config = "";                                                //variable for chart configuration, defined in if-statement dependent on chart setup

            //chart setup dependent on size of maxVal

            maxValCeil = Math.ceil(maxVal/stepSize)*stepSize;           //format max. Val to fit stepsize for upper axis

            //data setup for chart

            const data = {
                labels: labelTeams,                                     //labeling for teams to be displayed
                datasets: [{
                    label: 'Ranking der Teamleistungen',
                    data: dataSet,                                      //data to be used
                    backgroundColor: backgroundColors,
                    borderColor: borderColors,
                    borderWidth: 1,
                    fill: true
                }]
            };

            //config of chart display
            Chart.defaults.font.size = 16;
            config = {                 
                type: 'bar',
                data,
                options: {
                    scales: {
                        y: {
                            type: 'linear',
                            position: 'left',
                            beginAtZero: true,                      //beginning with 0
                            max: maxValCeil,                      //dependent on data input and step size
                            ticks: {
                                stepSize: stepSize,
                                font: {
                                    size: 11
                                }
                            },
                            title: {
                                display: true,
                                text: 'Gesammelte Kilometer',
                                font: {
                                    size: 20,
                                },
                            },
                        },
                    },
                    plugins: {
                        legend: {
                            display: false                     //to not display data labels in chart
                        }
                    }
                }
            };
            
            //rendering of chart
            const myChart = new Chart(
                document.getElementById('myChart'), 
                config
            );
        </script>
        <script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script>
        <script>
            window.cookieconsent.initialise({
                "palette": {
                "popup": {
                    "background": "#eaf7f7",
                    "text": "#5c7291"
                },
                "button": {
                    "background": "#56cbdb",
                    "text": "#ffffff"
                }
                },
                "theme": "edgeless",
                "position": "top",
                "content": {
                "message": "Diese Website nutzt technisch notwendige Cookies zur Bereitstellung des Nutzererlebnisses.",
                "dismiss": "Bestätigen",
                "link": "Mehr erfahren"
                }
            });
        </script>
    </body>
</html>